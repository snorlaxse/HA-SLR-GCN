# sign_gendata.py

准备数据

- mp4转换的npy文件（由`Preprocess/demo.py`获得）每个视频每一帧的坐标信息
- 标签文件（train_labels.csv\val_labels.csv\ground_truth.csv，数据集下载时获得）

输出数据

- {train\val\test}_data_joint.npy：提取出关键的27个关节点信息，并将视频帧数限制为max_frame(150帧)
- {train\val\test}_label.pkl：将csv标签文件信息 换成pkl方式存储

# gen_bone_data.py

{}_data_joint.npy  → {}_data_bone.npy

```shell
$ python gen_bone_data.py 
sign/27_2 test
3742 3 150 27 1
100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 26/26 [00:00<00:00, 35.09it/s]
sign/27_2 train
28142 3 150 27 1
100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 26/26 [00:05<00:00,  4.85it/s]
sign/27_2 val
4418 3 150 27 1
100%|██████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 26/26 [00:00<00:00, 31.65it/s]
```
注释：
N, C, T, V, M = data.shape  ex. (28142 3 150 27 1)

- N: 视频样例数  ex. 28142\4418\3742
- C: sign_gendata.py/num_channels --- 3
- T: sign_gendata.py/max_frame --- 150
- V: 关节点数 27
- M: sign_gendata.py/max_body_true --- 1

# gen_motion_data.py

{}\_data_{joint\bone}.npy → {}\_data_{joint\bone}_motion.npy

```
fp_sp[:, :, t, :, :] = data[:, :, t + 1, :, :] - data[:, :, t, :, :]  # core code
```

```
$ python gen_motion_data.py 
sign/27_2 train bone
(28142, 3, 150, 27, 1)
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 149/149 [00:02<00:00, 61.90it/s]
sign/27_2 train joint
(28142, 3, 150, 27, 1)
100%|█████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 149/149 [00:02<00:00, 64.88it/s]
sign/27_2 val bone
(4418, 3, 150, 27, 1)
100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 149/149 [00:00<00:00, 529.54it/s]
sign/27_2 val joint
(4418, 3, 150, 27, 1)
100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 149/149 [00:00<00:00, 534.35it/s]
sign/27_2 test bone
(3742, 3, 150, 27, 1)
100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 149/149 [00:00<00:00, 641.07it/s]
sign/27_2 test joint
(3742, 3, 150, 27, 1)
100%|████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████████| 149/149 [00:00<00:00, 650.92it/s]
```